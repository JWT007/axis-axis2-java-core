<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
  <meta http-equiv="content-type" content="">
  <title></title>
</head>

<body lang="en">
<h1>Code Listing For Axis2SampleDocLitService Service</h1>

<h2>Server:</h2>

<h3>echoString</h3>

<p>Locate the following code segment in "Axis2SampleDocLitServiceSkeleton.java".<br>
</p>
<pre> public org.apache.axis2.userguide.xsd.EchoStringReturnDocument echoString<br>        (org.apache.axis2.userguide.xsd.EchoStringParamDocument param4 ){<br>        //Todo: fill this with the necessary business logic<br>        throw new  java.lang.UnsupportedOperationException();<br>     }<br> </pre>

<p>Then complete the code by adding the business logic as shown below:</p>
<pre style="margin-left: 40px;">public org.apache.axis2.userguide.xsd.EchoStringReturnDocument echoString<br>   (org.apache.axis2.userguide.xsd.EchoStringParamDocument param4) throws Exception {<br>   <br>   //Use the factory to create the output document.<br>   org.apache.axis2.userguide.xsd.EchoStringReturnDocument retDoc = <br>           org.apache.axis2.userguide.xsd.EchoStringReturnDocument.Factory.newInstance();<br>   <br>   //send the string back.<br>   retDoc.setEchoStringReturn(param4.getEchoStringParam());<br>   return retDoc;<br> }<br></pre>

<h3>echoStringArray</h3>

<p>The code segment for echoStringArray is shown below:</p>
<pre style="margin-left: 40px;">public org.apache.axis2.userguide.xsd.EchoStringArrayReturnDocument echoStringArray<br>   (org.apache.axis2.userguide.xsd.EchoStringArrayParamDocument param0) throws Exception {<br><br>   //Use the factory to create the output document.<br>   org.apache.axis2.userguide.xsd.EchoStringArrayReturnDocument retDoc = <br>           org.apache.axis2.userguide.xsd.EchoStringArrayReturnDocument.Factory.newInstance();<br><br>   //Get the String array from the input parameters.<br>   String[] inParams = param0.getEchoStringArrayParam().getStringArray();<br>   org.apache.axis2.userguide.xsd.ArrayOfstringLiteral retParams = <br>           org.apache.axis2.userguide.xsd.ArrayOfstringLiteral.Factory.newInstance();<br><br>   //Set the input parameters to the output parameters for echoing.<br>     for (int i = 0; i &lt; inParams.length; i++) {<br>        retParams.addString(inParams[i]);<br>     }<br><br>   //return the output document.<br>   retDoc.setEchoStringArrayReturn(retParams); <br>   return retDoc;<br>}<br></pre>

<h3>echoStruct</h3>

<p>The code segment for echoStruct is shown below:</p>
<pre style="margin-left: 40px;">public org.apache.axis2.userguide.xsd.EchoStructReturnDocument echoStruct<br>     (org.apache.axis2.userguide.xsd.EchoStructParamDocument param2) throws Exception {<br>     //Use the factory to create the output document.<br>     org.apache.axis2.userguide.xsd.EchoStructReturnDocument retDoc = <br>             org.apache.axis2.userguide.xsd.EchoStructReturnDocument.Factory.newInstance();<br><br>     //Get the SOAPStrcut from the incoming parameters<br>     org.apache.axis2.userguide.xsd.SOAPStruct inStruct = param2.getEchoStructParam();<br><br>     //Struct for the sending back<br>     org.apache.axis2.userguide.xsd.SOAPStruct outStruct = <br>             org.apache.axis2.userguide.xsd.SOAPStruct.Factory.newInstance();<br><br>     //Fill the outgoing struct<br>     outStruct.setVarFloat(inStruct.getVarFloat());<br>     outStruct.setVarInt(inStruct.getVarInt());<br>     outStruct.setVarString(inStruct.getVarString());<br>     //Set the outgoing document.<br>     retDoc.setEchoStructReturn(outStruct);<br>     return retDoc;<br>}<br></pre>

<h2>Client:</h2>

<h3>Client for echoString Operation</h3>

<p>The following code fragment shows the necessary code for utilizing the
echoString operation of the Axis2SampleDocLitService that we have already
deployed. The code is very simple to understand and the explanations are in
the form of comments.</p>
<pre>     try {<br>            org.apache.axis2.userguide.Axis2SampleDocLitServiceStub stub = new<br>                    org.apache.axis2.userguide.Axis2SampleDocLitServiceStub(null,<br>                    "http://localhost:8080/axis2/services/Axis2SampleDocLitService");<br>            <br>            //Create the request document to be sent.<br>            org.apache.axis2.userguide.xsd.EchoStringParamDocument reqDoc =<br>                    org.apache.axis2.userguide.xsd.EchoStringParamDocument.Factory.newInstance();<br>            reqDoc.setEchoStringParam("Axis2 Echo");<br>            <br>            //invokes the Web service.<br>            org.apache.axis2.userguide.xsd.EchoStringReturnDocument resDoc = stub.echoString(reqDoc);<br>            System.out.println(resDoc.getEchoStringReturn());<br><br>        } catch (java.rmi.RemoteException e) {<br>            e.printStackTrace();<br>        }</pre>

<p>Similarly the following code fragments show client side code for
echoStringArray operation and echoStruct operation respectively.</p>

<h3>Client for echoStringArray Operation</h3>
<pre>      try {<br>            //Create the stub by passing the AXIS_HOME and target EPR.<br>            //We pass null to the AXIS_HOME and hence the stub will use the current directory as the AXIS_HOME<br>            org.apache.axis2.userguide.Axis2SampleDocLitServiceStub stub = new <br>                    org.apache.axis2.userguide.Axis2SampleDocLitServiceStub(null,<br>                    "http://localhost:8080/axis2/services/Axis2SampleDocLitService");<br><br>            //Create the request document to be sent.<br>            org.apache.axis2.userguide.xsd.EchoStringArrayParamDocument reqDoc = <br>                    org.apache.axis2.userguide.xsd.EchoStringArrayParamDocument.Factory.newInstance();<br>            org.apache.axis2.userguide.xsd.ArrayOfstringLiteral paramArray = <br>                    org.apache.axis2.userguide.xsd.ArrayOfstringLiteral.Factory.newInstance();<br><br>            paramArray.addString("Axis2");<br>            paramArray.addString("Echo");<br><br>            reqDoc.setEchoStringArrayParam(paramArray);<br>            org.apache.axis2.userguide.xsd.EchoStringArrayReturnDocument resDoc = stub.echoStringArray(reqDoc);<br><br>            //Get the response params<br>            String[] resParams = resDoc.getEchoStringArrayReturn().getStringArray();<br><br>            for (int i = 0; i &lt; resParams.length; i++) {<br>                 System.out.println(resParams[i]);<br>            }<br>        } catch (java.rmi.RemoteException e) {<br>            e.printStackTrace();  <br>        }<br></pre>

<h3>Client for echoStruct Operation</h3>
<pre>          try {<br>            //Create the stub by passing the AXIS_HOME and target EPR.<br>            //We pass null to the AXIS_HOME and hence the stub will use the current directory as the AXIS_HOME<br>            org.apache.axis2.userguide.Axis2SampleDocLitServiceStub stub = new<br>                    org.apache.axis2.userguide.Axis2SampleDocLitServiceStub(null,<br>                    "http://localhost:8080/axis2/services/Axis2SampleDocLitService");<br>            //Create the request Document<br>            org.apache.axis2.userguide.xsd.EchoStructParamDocument reqDoc =<br>                    org.apache.axis2.userguide.xsd.EchoStructParamDocument.Factory.newInstance();<br><br>            //Create the complex type<br>            org.apache.axis2.userguide.xsd.SOAPStruct reqStruct =<br>                    org.apache.axis2.userguide.xsd.SOAPStruct.Factory.newInstance();<br><br>            reqStruct.setVarFloat(100.50F);<br>            reqStruct.setVarInt(10);<br>            reqStruct.setVarString("High");<br><br>            reqDoc.setEchoStructParam(reqStruct);<br><br>            //Service invocation<br>            org.apache.axis2.userguide.xsd.EchoStructReturnDocument resDoc = stub.echoStruct(reqDoc);<br>            org.apache.axis2.userguide.xsd.SOAPStruct resStruct = resDoc.getEchoStructReturn();<br><br>            System.out.println("floot Value :" + resStruct.getVarFloat());<br>            System.out.println("int Value :" + resStruct.getVarInt());<br>            System.out.println("String Value :" + resStruct.getVarString());<br>        } catch (java.rmi.RemoteException e) {<br>            e.printStackTrace();<br>        }<br></pre>

</body>
</html>
